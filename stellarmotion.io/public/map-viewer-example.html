<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MapViewer - Ejemplo de Uso</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .map-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 20px;
        }
        .controls {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .control-group {
            margin-bottom: 15px;
        }
        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        .control-group input, .control-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        .btn:hover {
            background: #2563eb;
        }
        .btn-secondary {
            background: #6b7280;
        }
        .btn-secondary:hover {
            background: #4b5563;
        }
        .info {
            background: #f0f9ff;
            border: 1px solid #0ea5e9;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .info h3 {
            margin-top: 0;
            color: #0369a1;
        }
        .code {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üó∫Ô∏è MapViewer - Ejemplo de Uso</h1>
        
        <div class="info">
            <h3>‚úÖ Implementaci√≥n 100% Libre</h3>
            <p>Este mapa reemplaza Google Maps por una soluci√≥n completamente libre usando:</p>
            <ul>
                <li><strong>MapLibre GL JS</strong> - Motor de mapas vectoriales libre</li>
                <li><strong>OpenStreetMap</strong> - Datos de mapas libres</li>
                <li><strong>Esri World Imagery</strong> - Im√°genes satelitales libres</li>
                <li><strong>Supercluster</strong> - Clustering de marcadores</li>
            </ul>
        </div>

        <div class="controls">
            <h3>Controles del Mapa</h3>
            
            <div class="control-group">
                <label>Estilo del Mapa:</label>
                <select id="styleSelect">
                    <option value="streets">üó∫Ô∏è Mapa (OpenStreetMap)</option>
                    <option value="satellite">üåç Sat√©lite (Esri)</option>
                    <option value="hybrid">üîÑ H√≠brido</option>
                </select>
            </div>

            <div class="control-group">
                <label>Centro del Mapa:</label>
                <div style="display: flex; gap: 10px;">
                    <input type="number" id="latInput" placeholder="Latitud" value="-16.5000" step="0.0001">
                    <input type="number" id="lngInput" placeholder="Longitud" value="-68.1500" step="0.0001">
                </div>
            </div>

            <div class="control-group">
                <label>Zoom:</label>
                <input type="range" id="zoomSlider" min="1" max="18" value="13">
                <span id="zoomValue">13</span>
            </div>

            <div class="control-group">
                <button class="btn" onclick="updateMap()">üîÑ Actualizar Mapa</button>
                <button class="btn btn-secondary" onclick="addRandomMarkers()">üìç A√±adir Marcadores</button>
                <button class="btn btn-secondary" onclick="clearMarkers()">üóëÔ∏è Limpiar Marcadores</button>
                <button class="btn btn-secondary" onclick="locateUser()">üìç Mi Ubicaci√≥n</button>
                <button class="btn btn-secondary" onclick="toggleFullscreen()">‚§¢ Pantalla Completa</button>
            </div>
        </div>

        <div class="map-container">
            <div id="map" style="height: 500px; width: 100%;"></div>
        </div>

        <div class="controls">
            <h3>üìã C√≥digo de Ejemplo</h3>
            <div class="code">
// Inicializar el mapa
const mapViewer = new MapViewer('map', {
    lat: -16.5000,
    lng: -68.1500,
    zoom: 13,
    style: 'streets',
    showControls: true,
    enableClustering: true,
    points: [
        {
            id: '1',
            lat: -16.5000,
            lng: -68.1500,
            title: 'La Paz, Bolivia',
            description: 'Capital de Bolivia'
        }
    ],
    onMarkerClick: (point) => {
        console.log('Marcador clickeado:', point);
    },
    onMapClick: (lat, lng) => {
        console.log('Mapa clickeado:', lat, lng);
    }
});

// Cambiar estilo
mapViewer.changeStyle('satellite');

// A√±adir marcadores
mapViewer.setPoints([
    { id: '1', lat: -16.5000, lng: -68.1500, title: 'Punto 1' },
    { id: '2', lat: -16.5100, lng: -68.1600, title: 'Punto 2' }
]);
            </div>
        </div>

        <div class="controls">
            <h3>üîß Configuraci√≥n Avanzada</h3>
            <div class="code">
// Para usar MapTiler (opcional, mejora la calidad)
window.MAPTILER_KEY = 'tu_clave_de_maptiler';

// Auto-inicializaci√≥n con data attributes
&lt;div id="map" 
     data-map-viewer
     data-lat="-16.5000"
     data-lng="-68.1500"
     data-zoom="13"
     data-style="streets"
     data-points='[{"id":"1","lat":-16.5000,"lng":-68.1500,"title":"Punto 1"}]'
     style="height: 500px;"&gt;
&lt;/div&gt;
            </div>
        </div>
    </div>

    <script src="map-viewer.js"></script>
    <script>
        let mapViewer;

        // Inicializar el mapa
        function initMap() {
            mapViewer = new MapViewer('map', {
                lat: -16.5000,
                lng: -68.1500,
                zoom: 13,
                style: 'streets',
                showControls: true,
                enableClustering: true,
                points: [
                    {
                        id: '1',
                        lat: -16.5000,
                        lng: -68.1500,
                        title: 'La Paz, Bolivia',
                        description: 'Capital de Bolivia'
                    },
                    {
                        id: '2',
                        lat: -16.5100,
                        lng: -68.1600,
                        title: 'El Alto, Bolivia',
                        description: 'Ciudad hermana de La Paz'
                    }
                ],
                onMarkerClick: (point) => {
                    alert(`Marcador clickeado: ${point.title}`);
                },
                onMapClick: (lat, lng) => {
                    console.log('Mapa clickeado:', lat, lng);
                }
            });
        }

        // Actualizar mapa
        function updateMap() {
            const lat = parseFloat(document.getElementById('latInput').value);
            const lng = parseFloat(document.getElementById('lngInput').value);
            const zoom = parseInt(document.getElementById('zoomSlider').value);
            const style = document.getElementById('styleSelect').value;

            if (mapViewer) {
                mapViewer.setCenter(lat, lng);
                mapViewer.setZoom(zoom);
                mapViewer.changeStyle(style);
            }
        }

        // A√±adir marcadores aleatorios
        function addRandomMarkers() {
            const points = [];
            for (let i = 0; i < 10; i++) {
                points.push({
                    id: `random_${i}`,
                    lat: -16.5000 + (Math.random() - 0.5) * 0.1,
                    lng: -68.1500 + (Math.random() - 0.5) * 0.1,
                    title: `Punto Aleatorio ${i + 1}`,
                    description: `Descripci√≥n del punto ${i + 1}`
                });
            }
            mapViewer.setPoints(points);
        }

        // Limpiar marcadores
        function clearMarkers() {
            mapViewer.setPoints([]);
        }

        // Geolocalizaci√≥n
        function locateUser() {
            mapViewer.locateUser();
        }

        // Pantalla completa
        function toggleFullscreen() {
            mapViewer.toggleFullscreen();
        }

        // Actualizar valor del zoom
        document.getElementById('zoomSlider').addEventListener('input', function() {
            document.getElementById('zoomValue').textContent = this.value;
        });

        // Inicializar cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', initMap);
    </script>
</body>
</html>
